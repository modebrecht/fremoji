<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Franz√∂sisch Vokabel-Trainer 9. Klasse</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600&family=Nunito:wght@400;700&display=swap');

        body {
            font-family: 'Nunito', sans-serif;
            background-color: #f0fdf4;
        }

        h1, h2, h3, .emoji-display {
            font-family: 'Fredoka', sans-serif;
        }

        .emoji-bounce { animation: bounce 2s infinite; }
        @keyframes bounce {
            0%, 100% { transform: translateY(-5%); }
            50% { transform: translateY(5%); }
        }

        .btn-option { transition: all 0.2s; }
        .btn-option:active { transform: scale(0.95); }

        .fade-in { animation: fadeIn 0.4s ease-in; }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Success/Error Animations */
        .correct-anim {
            background-color: #86efac !important;
            border-color: #22c55e !important;
            color: #064e3b !important;
        }
        
        .wrong-anim {
            background-color: #fca5a5 !important;
            border-color: #ef4444 !important;
            color: #7f1d1d !important;
            animation: shake 0.5s;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        /* Category Card Hover */
        .cat-card:hover { transform: translateY(-3px); }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4 bg-gradient-to-br from-blue-100 via-indigo-100 to-purple-100">

    <div class="w-full max-w-lg bg-white rounded-3xl shadow-2xl overflow-hidden border-4 border-white min-h-[600px] flex flex-col">
        
        <div class="bg-indigo-600 p-4 text-white flex justify-between items-center shadow-md z-10">
            <div class="flex items-center gap-2">
                <span class="text-2xl">üá´üá∑</span>
                <span class="font-bold text-lg leading-tight">Vocabulaire<br><span class="text-indigo-200 text-xs font-normal">Niveau 9. Klasse</span></span>
            </div>
            <button onclick="goToMenu()" id="home-btn" class="hidden text-xs bg-indigo-700 hover:bg-indigo-800 px-3 py-1 rounded-lg transition">üè† Men√º</button>
        </div>

        <div id="menu-screen" class="p-6 fade-in flex-grow flex flex-col">
            <h2 class="text-2xl text-center font-bold text-gray-700 mb-6">W√§hle ein Thema</h2>
            <div class="grid grid-cols-2 gap-4 overflow-y-auto pb-4" id="category-grid">
                </div>
        </div>

        <div id="game-screen" class="hidden flex-grow flex flex-col">
            <div class="w-full bg-gray-200 h-2">
                <div class="bg-green-500 h-2 transition-all duration-500" style="width: 0%" id="progress-bar"></div>
            </div>

            <div class="p-6 text-center fade-in flex-grow flex flex-col justify-center">
                <div class="mb-2 text-indigo-400 text-sm font-bold uppercase tracking-wider" id="topic-label">THEMA</div>
                
                <div class="text-8xl mb-8 mt-4 emoji-display emoji-bounce drop-shadow-md cursor-default select-none" id="emoji-container">ü§î</div>

                <div class="grid grid-cols-1 gap-3" id="options-container">
                    </div>
                
                <div class="mt-auto pt-6 flex justify-between text-gray-400 text-xs font-mono">
                    <span>Frage <span id="current-q">1</span>/<span id="total-q">10</span></span>
                    <span id="score-display">Punkte: 0</span>
                </div>
            </div>
        </div>

        <div id="result-screen" class="hidden p-6 text-center fade-in flex-grow flex flex-col overflow-y-auto">
            <div class="text-6xl mb-2">üìä</div>
            <h2 class="text-2xl font-bold text-gray-800 mb-1">R√©sultat</h2>
            
            <div class="bg-indigo-50 rounded-xl p-4 mb-6 border-2 border-indigo-100 shadow-inner">
                <div class="flex justify-around items-end">
                    <div>
                        <div class="text-xs text-gray-500 uppercase font-bold">Richtig</div>
                        <div class="text-4xl font-bold text-green-600" id="final-score">0/10</div>
                    </div>
                    <div>
                        <div class="text-xs text-gray-500 uppercase font-bold">Quote</div>
                        <div class="text-4xl font-bold text-indigo-600" id="final-percent">0%</div>
                    </div>
                </div>
            </div>

            <div id="mistakes-container" class="hidden text-left mb-6">
                <h3 class="text-red-500 font-bold mb-3 border-b pb-1">‚ö†Ô∏è Deine Fehler:</h3>
                <div class="space-y-2 text-sm" id="mistakes-list">
                    </div>
            </div>
            
            <div id="perfect-msg" class="hidden text-green-600 font-bold text-lg mb-6">
                Perfekt! Keine Fehler! üéâ
            </div>

            <div class="mt-auto space-y-3">
                <button onclick="restartLevel()" class="w-full bg-white border-2 border-indigo-600 text-indigo-600 font-bold py-3 rounded-xl hover:bg-indigo-50 transition">
                    Wiederholen üîÑ
                </button>
                <button onclick="goToMenu()" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 rounded-xl shadow-lg transition">
                    Anderes Thema üè†
                </button>
            </div>
        </div>

    </div>

    <script>
        // --- DATA SETS (8 Sets x 10 Questions) ---
        const categories = [
            {
                id: 'essen',
                title: 'Essen',
                icon: 'ü•ê',
                color: 'bg-orange-100 border-orange-200 text-orange-800',
                questions: [
                    { emoji: "ü•ê", correct: "le croissant", distractors: ["le pain", "la baguette", "le g√¢teau"] },
                    { emoji: "üßÄ", correct: "le fromage", distractors: ["le lait", "le beurre", "le yaourt"] },
                    { emoji: "üçü", correct: "les frites", distractors: ["les pommes de terre", "les chips", "la viande"] },
                    { emoji: "üçé", correct: "la pomme", distractors: ["la poire", "l'orange", "la tomate"] },
                    { emoji: "üçû", correct: "le pain", distractors: ["le riz", "les p√¢tes", "la farine"] },
                    { emoji: "üçó", correct: "le poulet", distractors: ["le b≈ìuf", "le poisson", "le porc"] },
                    { emoji: "ü•ö", correct: "l'≈ìuf", distractors: ["le sel", "le sucre", "l'huile"] },
                    { emoji: "ü•ó", correct: "la salade", distractors: ["la soupe", "les l√©gumes", "le concombre"] },
                    { emoji: "üç´", correct: "le chocolat", distractors: ["le bonbon", "le biscuit", "le dessert"] },
                    { emoji: "üç¶", correct: "la glace", distractors: ["la cr√®me", "le g√¢teau", "le gla√ßon"] }
                ]
            },
            {
                id: 'trinken',
                title: 'Getr√§nke',
                icon: 'ü•§',
                color: 'bg-blue-100 border-blue-200 text-blue-800',
                questions: [
                    { emoji: "üíß", correct: "l'eau", distractors: ["le lait", "le jus", "le vin"] },
                    { emoji: "‚òï", correct: "le caf√©", distractors: ["le th√©", "le chocolat", "le coca"] },
                    { emoji: "ü•õ", correct: "le lait", distractors: ["l'eau", "la cr√®me", "le yaourt"] },
                    { emoji: "üßÉ", correct: "le jus", distractors: ["le soda", "le sirop", "la limonade"] },
                    { emoji: "üçµ", correct: "le th√©", distractors: ["la tisane", "le caf√©", "la soupe"] },
                    { emoji: "üç∑", correct: "le vin", distractors: ["la bi√®re", "le champagne", "l'alcool"] },
                    { emoji: "üç∫", correct: "la bi√®re", distractors: ["le cidre", "le vin", "l'eau"] },
                    { emoji: "ü•§", correct: "le soda", distractors: ["le jus", "l'eau min√©rale", "le lait"] },
                    { emoji: "üçã", correct: "la limonade", distractors: ["le citron", "l'orangeade", "le th√© glac√©"] },
                    { emoji: "üçº", correct: "le biberon", distractors: ["la bouteille", "le verre", "la tasse"] }
                ]
            },
            {
                id: 'kleidung',
                title: 'Kleidung',
                icon: 'üëó',
                color: 'bg-pink-100 border-pink-200 text-pink-800',
                questions: [
                    { emoji: "üëñ", correct: "le pantalon", distractors: ["le jean", "la jupe", "le short"] },
                    { emoji: "üëó", correct: "la robe", distractors: ["la chemise", "le t-shirt", "le manteau"] },
                    { emoji: "üëï", correct: "le t-shirt", distractors: ["le pull", "la veste", "le top"] },
                    { emoji: "üëü", correct: "les chaussures", distractors: ["les chaussettes", "les bottes", "les pieds"] },
                    { emoji: "üëì", correct: "les lunettes", distractors: ["le chapeau", "la montre", "les yeux"] },
                    { emoji: "üß•", correct: "le manteau", distractors: ["la veste", "l'imperm√©able", "le pull"] },
                    { emoji: "üß¢", correct: "la casquette", distractors: ["le chapeau", "le bonnet", "la t√™te"] },
                    { emoji: "üß¶", correct: "les chaussettes", distractors: ["les chaussures", "les gants", "le collant"] },
                    { emoji: "üëî", correct: "la chemise", distractors: ["la cravate", "le costume", "le gilet"] },
                    { emoji: "üß£", correct: "l'√©charpe", distractors: ["le bonnet", "les gants", "le foulard"] }
                ]
            },
            {
                id: 'tiere',
                title: 'Tiere',
                icon: 'üêæ',
                color: 'bg-green-100 border-green-200 text-green-800',
                questions: [
                    { emoji: "üêï", correct: "le chien", distractors: ["le chat", "le loup", "le renard"] },
                    { emoji: "üêà", correct: "le chat", distractors: ["le tigre", "le lion", "la souris"] },
                    { emoji: "üêé", correct: "le cheval", distractors: ["l'√¢ne", "la vache", "le z√®bre"] },
                    { emoji: "üê¶", correct: "l'oiseau", distractors: ["le poulet", "le canard", "l'avion"] },
                    { emoji: "üêü", correct: "le poisson", distractors: ["la baleine", "le requin", "le dauphin"] },
                    { emoji: "üêÑ", correct: "la vache", distractors: ["le cochon", "le mouton", "le taureau"] },
                    { emoji: "üêñ", correct: "le cochon", distractors: ["le sanglier", "la ferme", "le jambon"] },
                    { emoji: "ü¶Å", correct: "le lion", distractors: ["le tigre", "le chat", "l'ours"] },
                    { emoji: "üêò", correct: "l'√©l√©phant", distractors: ["la girafe", "l'hippopotame", "le rhinoc√©ros"] },
                    { emoji: "üêí", correct: "le singe", distractors: ["l'humain", "le gorille", "la banane"] }
                ]
            },
            {
                id: 'schule',
                title: 'Schule',
                icon: 'üè´',
                color: 'bg-yellow-100 border-yellow-200 text-yellow-800',
                questions: [
                    { emoji: "üñäÔ∏è", correct: "le stylo", distractors: ["le crayon", "la gomme", "la r√®gle"] },
                    { emoji: "üìö", correct: "les livres", distractors: ["les cahiers", "la biblioth√®que", "les devoirs"] },
                    { emoji: "üéí", correct: "le sac √† dos", distractors: ["la valise", "le sac", "la trousse"] },
                    { emoji: "üíª", correct: "l'ordinateur", distractors: ["la tablette", "le t√©l√©phone", "l'√©cran"] },
                    { emoji: "‚úÇÔ∏è", correct: "les ciseaux", distractors: ["la colle", "le papier", "le couteau"] },
                    { emoji: "üìè", correct: "la r√®gle", distractors: ["le stylo", "le crayon", "la mesure"] },
                    { emoji: "üìù", correct: "le devoir", distractors: ["l'examen", "la note", "le texte"] },
                    { emoji: "üè´", correct: "l'√©cole", distractors: ["la classe", "la cour", "le gymnase"] },
                    { emoji: "ü™ë", correct: "la chaise", distractors: ["le bureau", "la table", "le si√®ge"] },
                    { emoji: "üñçÔ∏è", correct: "le crayon", distractors: ["le feutre", "le pinceau", "la couleur"] }
                ]
            },
            {
                id: 'transport',
                title: 'Verkehr',
                icon: 'üöÜ',
                color: 'bg-gray-100 border-gray-200 text-gray-800',
                questions: [
                    { emoji: "üöó", correct: "la voiture", distractors: ["le bus", "le camion", "le taxi"] },
                    { emoji: "üöÜ", correct: "le train", distractors: ["le m√©tro", "le tram", "la gare"] },
                    { emoji: "‚úàÔ∏è", correct: "l'avion", distractors: ["l'h√©licopt√®re", "l'oiseau", "l'a√©roport"] },
                    { emoji: "üö≤", correct: "le v√©lo", distractors: ["la moto", "le scooter", "la roue"] },
                    { emoji: "üöå", correct: "le bus", distractors: ["le car", "le camion", "la voiture"] },
                    { emoji: "üö§", correct: "le bateau", distractors: ["la mer", "le navire", "la plage"] },
                    { emoji: "üèçÔ∏è", correct: "la moto", distractors: ["le v√©lo", "le scooter", "le casque"] },
                    { emoji: "üöÅ", correct: "l'h√©licopt√®re", distractors: ["l'avion", "le drone", "le ciel"] },
                    { emoji: "üöá", correct: "le m√©tro", distractors: ["le train", "le tunnel", "la ville"] },
                    { emoji: "üö∂", correct: "√† pied", distractors: ["en voiture", "en bus", "courir"] }
                ]
            },
            {
                id: 'haus',
                title: 'Haus',
                icon: 'üè†',
                color: 'bg-teal-100 border-teal-200 text-teal-800',
                questions: [
                    { emoji: "üè†", correct: "la maison", distractors: ["l'appartement", "l'immeuble", "le toit"] },
                    { emoji: "üõèÔ∏è", correct: "le lit", distractors: ["la chambre", "le canap√©", "le dormir"] },
                    { emoji: "üõÅ", correct: "la baignoire", distractors: ["la douche", "le bain", "la salle de bain"] },
                    { emoji: "üõãÔ∏è", correct: "le canap√©", distractors: ["le fauteuil", "la chaise", "le salon"] },
                    { emoji: "üì∫", correct: "la t√©l√©", distractors: ["l'√©cran", "le film", "la radio"] },
                    { emoji: "üóùÔ∏è", correct: "la cl√©", distractors: ["la porte", "la serrure", "le m√©tal"] },
                    { emoji: "üö™", correct: "la porte", distractors: ["la fen√™tre", "le mur", "l'entr√©e"] },
                    { emoji: "üçΩÔ∏è", correct: "la table", distractors: ["la cuisine", "le repas", "l'assiette"] },
                    { emoji: "üå≥", correct: "le jardin", distractors: ["la fleur", "l'arbre", "l'herbe"] },
                    { emoji: "üöΩ", correct: "les toilettes", distractors: ["le bain", "l'eau", "le papier"] }
                ]
            },
            {
                id: 'sport',
                title: 'Sport',
                icon: '‚öΩ',
                color: 'bg-red-100 border-red-200 text-red-800',
                questions: [
                    { emoji: "‚öΩ", correct: "le foot", distractors: ["le ballon", "le stade", "le sport"] },
                    { emoji: "üéæ", correct: "le tennis", distractors: ["la balle", "la raquette", "le ping-pong"] },
                    { emoji: "üèÄ", correct: "le basket", distractors: ["le panier", "le ballon", "le hand"] },
                    { emoji: "üèä", correct: "la natation", distractors: ["la piscine", "l'eau", "la mer"] },
                    { emoji: "üéø", correct: "le ski", distractors: ["la neige", "la montagne", "l'hiver"] },
                    { emoji: "üèÉ", correct: "courir", distractors: ["marcher", "sauter", "jouer"] },
                    { emoji: "üö¥", correct: "le cyclisme", distractors: ["le v√©lo", "la course", "la roue"] },
                    { emoji: "ü•ä", correct: "la boxe", distractors: ["le combat", "le gant", "frapper"] },
                    { emoji: "üßò", correct: "le yoga", distractors: ["la gym", "le calme", "le sport"] },
                    { emoji: "üèÜ", correct: "le champion", distractors: ["la coupe", "la m√©daille", "le gagnant"] }
                ]
            }
        ];

        // --- STATE MANAGEMENT ---
        let currentSet = [];
        let currentIndex = 0;
        let score = 0;
        let wrongAnswers = []; // Stores objects { emoji, correct, selected }
        let isAnswerLocked = false;
        let currentCategoryId = null;

        // --- INIT & MENU ---
        function initMenu() {
            const grid = document.getElementById('category-grid');
            grid.innerHTML = '';
            
            categories.forEach((cat, index) => {
                const btn = document.createElement('div');
                btn.className = `cat-card cursor-pointer p-4 rounded-xl border-2 shadow-sm flex flex-col items-center justify-center gap-2 transition ${cat.color}`;
                btn.innerHTML = `
                    <div class="text-4xl">${cat.icon}</div>
                    <div class="font-bold text-lg">${cat.title}</div>
                `;
                btn.onclick = () => startGame(index);
                grid.appendChild(btn);
            });

            document.getElementById('menu-screen').classList.remove('hidden');
            document.getElementById('game-screen').classList.add('hidden');
            document.getElementById('result-screen').classList.add('hidden');
            document.getElementById('home-btn').classList.add('hidden');
        }

        // --- GAME LOGIC ---
        function startGame(catIndex) {
            currentCategoryId = catIndex;
            const category = categories[catIndex];
            
            // Clone and Shuffle questions
            currentSet = shuffleArray([...category.questions]);
            
            currentIndex = 0;
            score = 0;
            wrongAnswers = [];
            isAnswerLocked = false;

            // UI Updates
            document.getElementById('topic-label').innerText = category.title;
            document.getElementById('menu-screen').classList.add('hidden');
            document.getElementById('result-screen').classList.add('hidden');
            document.getElementById('game-screen').classList.remove('hidden');
            document.getElementById('home-btn').classList.remove('hidden');
            document.getElementById('score-display').innerText = `Punkte: 0`;

            loadQuestion();
        }

        function loadQuestion() {
            if (currentIndex >= currentSet.length) {
                endGame();
                return;
            }

            const q = currentSet[currentIndex];
            const options = shuffleArray([q.correct, ...q.distractors]);

            // Update UI
            document.getElementById('emoji-container').innerText = q.emoji;
            document.getElementById('current-q').innerText = currentIndex + 1;
            document.getElementById('total-q').innerText = currentSet.length;
            
            // Progress Bar
            const progress = (currentIndex / currentSet.length) * 100;
            document.getElementById('progress-bar').style.width = `${progress}%`;

            // Buttons
            const container = document.getElementById('options-container');
            container.innerHTML = '';
            
            options.forEach(opt => {
                const btn = document.createElement('button');
                btn.className = 'btn-option w-full bg-white border-2 border-indigo-100 text-indigo-900 font-semibold py-3 px-4 rounded-xl hover:bg-indigo-50 hover:border-indigo-300 text-lg shadow-sm';
                btn.innerText = opt;
                btn.onclick = () => checkAnswer(btn, opt, q);
                container.appendChild(btn);
            });

            isAnswerLocked = false;
        }

        function checkAnswer(btn, selected, questionData) {
            if (isAnswerLocked) return;
            isAnswerLocked = true;

            const isCorrect = selected === questionData.correct;
            const allBtns = document.querySelectorAll('.btn-option');

            if (isCorrect) {
                score++;
                btn.classList.add('correct-anim');
                document.getElementById('score-display').innerText = `Punkte: ${score}`;
            } else {
                btn.classList.add('wrong-anim');
                // Track mistake
                wrongAnswers.push({
                    emoji: questionData.emoji,
                    correct: questionData.correct,
                    selected: selected
                });
                
                // Show correct answer
                allBtns.forEach(b => {
                    if (b.innerText === questionData.correct) {
                        b.classList.add('correct-anim');
                    }
                });
            }

            setTimeout(() => {
                currentIndex++;
                loadQuestion();
            }, 1200);
        }

        function endGame() {
            document.getElementById('game-screen').classList.add('hidden');
            document.getElementById('result-screen').classList.remove('hidden');
            document.getElementById('progress-bar').style.width = `100%`;

            // Score Logic
            const total = currentSet.length;
            const percent = Math.round((score / total) * 100);

            document.getElementById('final-score').innerText = `${score}/${total}`;
            document.getElementById('final-percent').innerText = `${percent}%`;

            // Mistakes Handling
            const mistakesContainer = document.getElementById('mistakes-container');
            const mistakesList = document.getElementById('mistakes-list');
            const perfectMsg = document.getElementById('perfect-msg');

            if (wrongAnswers.length > 0) {
                perfectMsg.classList.add('hidden');
                mistakesContainer.classList.remove('hidden');
                mistakesList.innerHTML = '';
                
                wrongAnswers.forEach(item => {
                    const row = document.createElement('div');
                    row.className = 'flex items-center justify-between bg-white p-2 rounded border border-gray-200';
                    row.innerHTML = `
                        <div class="flex items-center gap-2">
                            <span class="text-xl">${item.emoji}</span>
                            <span class="text-red-500 line-through decoration-2">${item.selected}</span>
                        </div>
                        <div class="text-green-600 font-bold">
                            ${item.correct} ‚úÖ
                        </div>
                    `;
                    mistakesList.appendChild(row);
                });
            } else {
                mistakesContainer.classList.add('hidden');
                perfectMsg.classList.remove('hidden');
            }
        }

        // --- HELPERS ---
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function restartLevel() {
            if (currentCategoryId !== null) {
                startGame(currentCategoryId);
            }
        }

        function goToMenu() {
            initMenu();
        }

        // --- START ---
        window.onload = initMenu;

    </script>
</body>
</html>